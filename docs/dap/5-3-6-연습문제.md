---
title: 5-3-6. 연습문제
tags: 
---

> 과목5. 데이터베이스 설계와 이용 > 제3장 데이터베이스 성능 개선 > 연습문제

### 문제 1. 다음과 같은 인덱스 조건에서 아래의 SQL이 수행된다고 가정할 때 다음 중 예상 플랜에 대한 설명으로 틀린 것은?(INDEX : 주문일자 + 제품)

```sql
select *
  from ORDERITEM
 where 주문일자 BETWEEN '20060501' and '20060510'
   and 제품 IN (select 제품 from PRODUCT where 제품명 like 'SM%)
   and 금액 > 1000000;
```

  * [ ] ① 서버 쿼리는 메인 쿼리의 항목을 가지지 않았으므로 먼저 수행하여 '제품' 코드를 제공할 수도 있다.
  * [ ] ② 위 SQL은 서버 쿼리가 먼저 수행되는 것보다 체크 조건으로 사용하는 것이 좋다.
  * [ ] ③ 서버 쿼리가 먼저 수행되면 옵티마이저는 공급된 제품 수만큼의 '주문일자' 범위를 반복 검색한다.
  * [x] ④ 서버 쿼리가 먼저 수행되는 경우에는 /*+ USE CONCAT */ 힌트를 사용하여 제공되는 제품 수만큼 실행 계획이 분리될 수 있도록 해야 한다.
> 서버 쿼리가 먼저 수행되더라도 서브쿼리에서 제공되는 결과 건수를 알수가 없으므로 /*+ USE CONCAT */ 힌트를 사용하여 실행계획을 분리할 수는 없다.

### 문제 2. 다음은 TKPROF를 수행하여 집계된 OVERALL TOTALS을 보고 분석한 내용이다.다음 중 분석 내용으로 틀린 것은?의

OVERALL TOTALS FOR ALL NON-RECURSIVE STATEMENTS

|call    |  count |     cpu | elapsed |   disk |    query |current |   rows|
|-------:|-------:|--------:|--------:|-------:|---------:|-------:|------:|
|Parse   | 334703 |  240.06 |  472.64 |   1141 |     4548 |   2801 |      0|
|Execute |1225282 | 1413.52 | 3885.84 | 114650 | 12349154 |4415610 | 403674|
|Fetch   |1678364 |19460.79 |40252.73 |9442664 |368882755 | 379063 |4091994|   
|total   |3238349 |21114.37 |44611.21 |9558455 |381236457 |4797474 |4495688|

  * [ ] ① CPU Time과 ELAPSE 타임의 편차가 심각한 것으로 보아 I/O에 대한 병목이나 시스템 가에 대한 오버헤드가 존재하고 있는 것을 알 수 있다.
  * [ ] ② 1 Row당 평균 Disk I/O는 2.1 Block이 발생하고 있는 것으로 보아 대체적으로 옵티마이징 전략에 많은 문제가 있는 것으로 판단된다.
  * [x] ③ BLOCK I/O의 비효율을 분석해 본 결과 불필요한 DB Block I/O가 많이 나타나고 있어데이터베이스 버퍼 캐시의 사이즈를 증가시켜야 한다.
  * [ ] ④ Parse, Execute, Fetch의 비율로 보아 대부분의 SQL이 Hold Cursor 없이 루프 내에서 반복적으로 수행되었다.
> BLOCK I/O의 비효율을 분석할 때 메모리 사용을을 많이 분석하는데 97% 이상으로 나타난 것으로 보아 불필요한 DB Block I/O는 없는 것으로 판단된다.

### 문제 3. 다음 중 Nested Loop 조인의 원리에 대한 설명으로 틀린 것은 ?
  * [x] ① 조인 후 CHECK 되는 조건은 처리 범위가 넓을수록 수행 속도가 저하된다. 
  * [ ] ② 자신에게 주어진 상수 값에 의해 스스로 처리 범위를 줄이는 것이 아니라 선행 집합에서 처리된 결과에 따라 처리 범위가 결정된다. 
  * [ ] ③ 먼저 어떤 테이블의 처리 범위를 하나씩 액세스하면서 그 추출된 값으로 연결할 테이블을 조인하는 방식이다. 
  * [ ] ④ 조인 속성의 인덱스 유무와 액세스 방향에 따라 수행 속도에 많은 차이가 발생된다.
> Nested Loop 조인에서 조인 후 CHECK 되는 조건의 처리 범위가 넓을수록 수행 속도는 향상된다.

### 문제 4. 다음 중 절차적인 처리 방식의 비효율에 대한 설명으로 틀린 것은?
  * [ ] ① 수행되는 SQL이 LOOP 내에서 반복적으로 수행되는 구조이므로 DBMS Call이 과도하게 발생하게 된다. 
  * [ ] ② 업무 규칙 변경 시 프로그램 구조 수정이 불가피하다.
  * [x] ③ 단위 SQL이 반복적으로 수행되는 구조이므로 랜덤 I/O 발생이 감소한다. 
  * [ ] ④ DBMS는 SQL 단위로 최적화를 수행하므로 개별적인 SQL은 개선이 가능하지만 전체의 최적화는 불가능하다.
> 단위 SQL이 반복적으로 수행되는 구조의 경우 랜덤 I/O 발생이 증가한다.

### 문제 5. CPU Utilization은 시스템의 성능을 평가하기 위한 기준으로 많이 활용된다. 다음 중 CPU Utilization에 대한 설명으로 틀린 것은?
  * [ ] ① 주기별 %idle 비율은 분석의 주요 관점으로 Kidle 비율이 낮게 나타날 수 있는 원인은 단순히 cpu의 용량 부족 이외에도 %wio(waiting for block I/O)와 관련이 있을 수 있다. 
  * [ ] ② %idle은 일반적으로 20~30%을 유지하는 것이 바람직하다. 
  * [ ] ③ %usr는 사용자 모드의 CPU 사용 비율이고, %sys는 시스템 모드의 CPU 사용 비율을 의미한다. 
  * [x] ④ %wio는 CPU가 I/O를 발생시키기 위해 사용한 CPU 사용률을 의미한다.
> %wio는 process의 block I/O Waiting으로 인한 idle 비율을 의미한다.

<br><br><br>
> 출처 : 데이터온에어 – 한국데이터산업진흥원([https://dataonair.or.kr](https://dataonair.or.kr))